webpackJsonp([1],{"+iJY":function(t,e){},"+oP0":function(t,e){},"/hDB":function(t,e){},"4fUq":function(t,e){},"60Sd":function(t,e){},"9uQL":function(t,e){},DT7J:function(t,e){},"KBG/":function(t,e){},KDS5:function(t,e){},KX9U:function(t,e){},LW4e:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this.isRouterAlive?e("router-view"):this._e()],1)},staticRenderFns:[]};var i=o("VU/8")({name:"App",provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!0}}},a,!1,function(t){o("YkMK")},null,null).exports,s=o("/ocq"),l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hello"},[o("h1",[t._v(t._s(t.msg))]),t._v(" "),o("h2",[t._v("Essential Links")]),t._v(" "),t._m(0),t._v(" "),o("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",[o("li",[o("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),o("li",[o("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),o("li",[o("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),o("li",[o("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),o("br"),t._v(" "),o("li",[o("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var r=o("VU/8")({name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App"}}},l,!1,function(t){o("RqNW")},"data-v-3b884edb",null).exports,c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hello"},[o("h1",[t._v(t._s(t.msg))]),t._v(" "),o("h2",[t._v("14321432143")]),t._v(" "),t._m(0),t._v(" "),o("h2",[t._v("Ecosystem")]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",[o("li",[o("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("\n        Core Docs\n      ")])]),t._v(" "),o("li",[o("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("\n        Forum\n      ")])]),t._v(" "),o("li",[o("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("\n        Community Chat\n      ")])]),t._v(" "),o("li",[o("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("\n        Twitter\n      ")])]),t._v(" "),o("br"),t._v(" "),o("li",[o("a",{attrs:{href:"http://vuejs-templates.github.io/webpack/",target:"_blank"}},[t._v("\n        Docs for This Template\n      ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"http://router.vuejs.org/",target:"_blank"}},[this._v("\n        vue-router\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vuex.vuejs.org/",target:"_blank"}},[this._v("\n        vuex\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"http://vue-loader.vuejs.org/",target:"_blank"}},[this._v("\n        vue-loader\n      ")])]),this._v(" "),e("li",[e("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[this._v("\n        awesome-vue\n      ")])])])}]};var u=o("VU/8")({name:"App",data:function(){return{msg:"Welcome to Your Vue.js App"}}},c,!1,function(t){o("9uQL")},"data-v-29d9f61c",null).exports,d={name:"Login",data:function(){var t=this;return{ruleForm2:{userName:"",pass:"",verifyCode:""},rules2:{userName:[{validator:function(t,e,o){if(!e)return o(new Error("用户名不能为空"));setTimeout(function(){/^[\u0391-\uFFE5]+$/.test(e)?o():o(new Error("请输入中文名"))},500)},trigger:"blur"}],pass:[{validator:function(e,o,n){""===o?n(new Error("请输入密码")):(""!==t.ruleForm2.checkPass&&t.$refs.ruleForm2.validateField("checkPass"),n())},trigger:"blur"}],verifyCode:[{validator:function(t,e,o){if(!e)return o(new Error("验证码不能为空"));setTimeout(function(){/^[A-Za-z0-9]+$ /.test(e)?o(new Error("验证码错误")):o()},500)},trigger:"blur"}]},verifyCodeURL:""}},methods:{Login:function(){var t=this;console.log(this.ruleForm2.userName),this.$axios.post(this.$url+"/userSystem/session/user",this.$qs.stringify({userName:this.ruleForm2.userName,password:this.ruleForm2.pass,code:this.ruleForm2.verifyCode})).then(function(e){console.log(e),0==e.data.status?(t.$store.commit("loginState",{userId:e.data.object.userId,userName:e.data.object.userName}),t.$router.push({path:"/"})):1==e.data.status?t.$alert("用户名、密码或验证码错误!","通知",{confirmButtonText:"我知道了",type:"error"}):3==e.data.status?(t.$alert("验证码错误或为空！","通知",{confirmButtonText:"我知道了",type:"error"}),t.verifyCode()):t.$alert("登录失败！","通知",{confirmButtonText:"我知道了",type:"error"})})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.Login(e)})},resetForm:function(t){this.$refs[t].resetFields()},rejest:function(){this.$router.push({path:"/Rejest"})},changeCode:function(){this.verifyCode()},verifyCode:function(){var t=this;this.$axios.get(this.$url+"/userSystem/verifyCode",{responseType:"arraybuffer"}).then(function(t){return"data:image/png;base64,"+btoa(new Uint8Array(t.data).reduce(function(t,e){return t+String.fromCharCode(e)},""))}).then(function(e){console.log(e+"111111111111111111111111111"),t.verifyCodeURL=e})}},mounted:function(){this.verifyCode()}},p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("登陆")]),t._v(" "),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.rejest}},[t._v("去注册")])],1),t._v(" "),o("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm2,"status-icon":"",rules:t.rules2,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[o("el-input",{attrs:{type:"user",autocomplete:"off"},model:{value:t.ruleForm2.userName,callback:function(e){t.$set(t.ruleForm2,"userName",e)},expression:"ruleForm2.userName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"pass"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm2.pass,callback:function(e){t.$set(t.ruleForm2,"pass",e)},expression:"ruleForm2.pass"}})],1),t._v(" "),o("el-form-item",{staticClass:"verifyCodeBox",attrs:{label:"验证码",prop:"verifyCode"}},[o("el-input",{model:{value:t.ruleForm2.verifyCode,callback:function(e){t.$set(t.ruleForm2,"verifyCode",t._n(e))},expression:"ruleForm2.verifyCode"}})],1),t._v(" "),o("img",{staticClass:"verifyCode",attrs:{src:t.verifyCodeURL,alt:""},on:{click:t.changeCode}}),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm2")}}},[t._v("登陆")]),t._v(" "),o("el-button",{on:{click:function(e){t.resetForm("ruleForm2")}}},[t._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var h=o("VU/8")(d,p,!1,function(t){o("oTrB")},"data-v-9efd1c42",null).exports,f={name:"Login",data:function(){var t=this;return{ruleForm2:{userName:"",pass:"",checkPass:"",email:"",emailCode:""},rules2:{userName:[{validator:function(t,e,o){if(!e)return o(new Error("用户名不能为空"));setTimeout(function(){/^[\u0391-\uFFE5]+$/.test(e)?o():o(new Error("请输入中文名"))},500)},trigger:"blur"}],pass:[{validator:function(e,o,n){""===o?n(new Error("请输入密码")):(""!==t.ruleForm2.checkPass&&t.$refs.ruleForm2.validateField("checkPass"),n())},trigger:"blur"}],checkPass:[{validator:function(e,o,n){""===o?n(new Error("请再次输入密码")):o!==t.ruleForm2.pass?n(new Error("两次输入密码不一致!")):n()},trigger:"blur"}],email:[{validator:function(t,e,o){if(!e)return o(new Error("邮箱不能为空"));setTimeout(function(){/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/.test(e)?o():o(new Error("邮箱格式错误"))},500)},trigger:"blur"}],emailCode:[{validator:function(t,e,o){""===e?o(new Error("请输入验证码")):o()},trigger:"blur"}]},verifyCodeURL:""}},methods:{resetForm:function(t){this.$refs[t].resetFields()},toLogin:function(){this.$router.push({path:"/Login"})},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.rejest()})},getCode:function(){""==this.ruleForm2.email?this.$notify({title:"警告",message:"请先填写邮箱地址",type:"warning"}):this.$axios.get(this.$url+"/userSystem/user/eMailCode",{params:{eMail:this.ruleForm2.email}}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},rejest:function(){var t=this;this.$axios.post(this.$url+"/userSystem/user",this.$qs.stringify({userName:this.ruleForm2.userName,password:this.ruleForm2.pass,rePassword:this.ruleForm2.checkPass,eMail:this.ruleForm2.email,mailCode:this.ruleForm2.emailCode})).then(function(e){console.log(e),0==e.data.status?(t.$store.commit("loginState",{userId:e.data.object.userId,userName:e.data.object.userName}),t.$router.push({path:"/"})):1==e.data.status?t.$alert("用户名、密码或验证码错误!","通知",{confirmButtonText:"我知道了",type:"error"}):3==e.data.status?(t.$alert("验证码错误或为空！","通知",{confirmButtonText:"我知道了",type:"error"}),t.verifyCode()):t.$alert("登录失败！","通知",{confirmButtonText:"我知道了",type:"error"})})},Login:function(){var t=this;console.log(this.ruleForm2.userName),this.$axios.post(this.$url+"/userSystem/session/user",this.$qs.stringify({userName:this.ruleForm2.userName,password:this.ruleForm2.pass,code:this.ruleForm2.verifyCode})).then(function(e){console.log(e),0==e.data.status?t.$router.push({path:"/"}):1==e.data.status?t.$alert("用户名、密码或验证码错误!","通知",{confirmButtonText:"我知道了",type:"error"}):3==e.data.status?(t.$alert("验证码错误或为空！","通知",{confirmButtonText:"我知道了",type:"error"}),t.verifyCode()):t.$alert("登录失败！","通知",{confirmButtonText:"我知道了",type:"error"})})}},mounted:function(){}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login"},[o("el-card",{staticClass:"box-card"},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("注册")]),t._v(" "),o("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.toLogin}},[t._v("去登陆")])],1),t._v(" "),o("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm2,"status-icon":"",rules:t.rules2,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"用户名",prop:"userName"}},[o("el-input",{attrs:{type:"user",autocomplete:"off"},model:{value:t.ruleForm2.userName,callback:function(e){t.$set(t.ruleForm2,"userName",e)},expression:"ruleForm2.userName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"pass"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm2.pass,callback:function(e){t.$set(t.ruleForm2,"pass",e)},expression:"ruleForm2.pass"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[o("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm2.checkPass,callback:function(e){t.$set(t.ruleForm2,"checkPass",e)},expression:"ruleForm2.checkPass"}})],1),t._v(" "),o("el-form-item",{staticClass:"verifyCodeBox",attrs:{label:"邮箱",prop:"email"}},[o("el-input",{attrs:{type:"user",autocomplete:"off"},model:{value:t.ruleForm2.email,callback:function(e){t.$set(t.ruleForm2,"email",e)},expression:"ruleForm2.email"}})],1),t._v(" "),o("el-form-item",{staticClass:"verifyCodeBox",attrs:{label:"邮箱验证",prop:"emailCode"}},[o("el-input",{model:{value:t.ruleForm2.emailCode,callback:function(e){t.$set(t.ruleForm2,"emailCode",e)},expression:"ruleForm2.emailCode"}},[o("el-button",{staticClass:"getCode",attrs:{slot:"append"},on:{click:t.getCode},slot:"append"},[t._v("获取验证码")])],1)],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("ruleForm2")}}},[t._v("注册并登陆")]),t._v(" "),o("el-button",{on:{click:function(e){t.resetForm("ruleForm2")}}},[t._v("重置")])],1)],1)],1)],1)},staticRenderFns:[]};var g=o("VU/8")(f,m,!1,function(t){o("mR14")},"data-v-0c82379e",null).exports,v={data:function(){return{activeIndex:"1",activeIndex2:""}},methods:{handleSelect:function(t,e){console.log(t,e)},home:function(){this.$router.push({path:"/"})},canvas:function(){this.$router.push({path:"/canvas"})}}},_={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"header"},[o("div",{staticClass:"line"}),t._v(" "),o("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex2,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.handleSelect}},[o("el-menu-item",{staticStyle:{width:"100px"},attrs:{index:"0"}}),t._v(" "),o("el-menu-item",{attrs:{index:"1"},on:{click:t.home}},[t._v("Home")]),t._v(" "),o("el-menu-item",{attrs:{index:"2"},on:{click:t.canvas}},[t._v("二维演示")]),t._v(" "),o("el-menu-item",{attrs:{index:"3",disabled:""}},[t._v("消息中心")]),t._v(" "),o("el-menu-item",{attrs:{index:"4",disabled:""}},[t._v("个人中心")])],1)],1)},staticRenderFns:[]};var y=o("VU/8")(v,_,!1,function(t){o("SIY2")},null,null).exports,b={data:function(){return{activeIndex:"1",activeIndex2:"1"}},methods:{handleSelect:function(t,e){console.log(t,e)}}},w={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"footer"},[e("span",[this._v("Copyright © 重庆邮电大学信管工作室 2018")])])}]};var x=o("VU/8")(b,w,!1,function(t){o("kTa8")},null,null).exports,C={name:"Index",data:function(){return{msg:"Welcome to Your Vue.js App",dialogVisible:!1,input:""}},components:{HeaderHeader:y,FooterFooter:x},methods:{indexAddPrograme:function(){var t=this,e=this;this.$prompt("请输入项目名称","添加项目",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"名称格式不正确"}).then(function(o){var n=o.value;t.$message({type:"success",message:"你的项目名称是: "+n});t.$axios.post(e.$url+"/question/insertQuestion",e.$qs.stringify({questionName:n,userId:sessionStorage.getItem("userId")})).then(function(t){console.log(t),e.$refs.child1.addPrograme(t)}).catch(function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:"取消添加"})})}}},$={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"allBox"},[o("header-header",{staticClass:"headerheader"}),t._v(" "),o("div",{staticClass:"all"},[o("div",{staticClass:"add"},[o("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus"},on:{click:t.indexAddPrograme}},[t._v("添加项目")]),t._v(" "),o("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("span",[t._v("项目名称：")]),o("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1)],1),t._v(" "),o("div",[o("router-view",{ref:"child1"})],1)]),t._v(" "),o("footer-footer")],1)},staticRenderFns:[]};var S=o("VU/8")(C,$,!1,function(t){o("NbCZ")},"data-v-6c795b4a",null).exports,k={name:"Index",data:function(){return{currentPage:1,tableData:[],list:[],dialogVisible:!1,options:[],valueId:"",value:"",workIndex:"",yizhixing:[],zhengzaizhixing:[],dialogVisible1:!1,resultId:""}},methods:{handleDelete:function(t,e){var o=this;console.log(t,e),console.log(o.tableData[t].id),this.$axios.delete(o.$url+"/question/removeQuestion",{params:{questionId:o.tableData[t].id}}).then(function(e){console.log(0x27797f26d671c8),console.log(e),0==e.data.status?(o.$notify({title:"警告",message:"项目*"+o.tableData[t].questionName+"*删除成功",type:"warning"}),o.tableData.splice(t,1)):o.$notify({title:"警告",message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)})},addPrograme:function(t){this.loadAllData()},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){console.log("当前页: "+t)},prepareData:function(t,e){this.$router.push({path:"/DataPerpare",query:{id:this.tableData[t].id}})},dealData:function(t){return console.log(parseInt(t.processState)),console.log(parseInt(t.geneticExecuted)),console.log(4==parseInt(t.processState)&&parseInt(t.geneticExecuted)<5),0==parseInt(t.processState)?{id:t.questionId,questionName:t.questionName,prepareDataState:"进行准备",checkDataState:"",ExecutionAlgorithmState:"",resultsState:""}:1==parseInt(t.processState)?{id:t.questionId,questionName:t.questionName,prepareDataState:"正在准备",checkDataState:"",ExecutionAlgorithmState:"",resultsState:""}:2==parseInt(t.processState)?(console.log("lalalalla"),{id:t.questionId,questionName:t.questionName,prepareDataState:"准备完成",checkDataState:"开始",ExecutionAlgorithmState:"",resultsState:""}):3==parseInt(t.processState)?{id:t.questionId,questionName:t.questionName,prepareDataState:"准备完成",checkDataState:"正在计算",ExecutionAlgorithmState:"",resultsState:""}:8==parseInt(t.simpleExecuted)||6==parseInt(t.geneticExecuted)?{id:t.questionId,questionName:t.questionName,prepareDataState:"准备完成",checkDataState:"计算完成",ExecutionAlgorithmState:"选择算法",resultsState:"查看结果"}:4==parseInt(t.processState)?(console.log("sdafdsafdasfds"),{id:t.questionId,questionName:t.questionName,prepareDataState:"准备完成",checkDataState:"计算完成",ExecutionAlgorithmState:"选择算法",resultsState:""}):void 0},workDistance:function(t,e){this.workIndex=t,console.log(this.tableData[t]),console.log(this.list.length),console.log(t);var o=this.list.length-t-1;if(console.log(o),2==parseInt(this.list[o].processState)){console.log(this.list[t]),this.$notify({title:"成功",message:"正在开始计算距离,请等待",type:"success"});var n=this;n.$axios.get(n.$url+"/distance/generateDistance",{params:{questionId:n.tableData[t].id}}).then(function(t){console.log(t),0==t.data.status||n.$notify({title:"警告",message:t.data.msg,type:"warning"})}).catch(function(t){console.log(t)}),setTimeout(function(){n.loadAllData()},3e3)}else that.$notify({title:"警告",message:"已经计算完成，请勿重复计算",type:"warning"})},loaded:function(){var t=this;t.$axios.get(t.$url+"/getExecutedAlgorithm",{params:{questionId:t.valueId}}).then(function(e){if(console.log(e),0==e.data.status)for(var o in t.yizhixing=[],e.data.object){var n={value:e.data.object[o],key:o};t.yizhixing.unshift(n)}else t.$notify({title:"警告",message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)})},loading:function(){var t=this;t.$axios.get(t.$url+"/getExecutingAlgorithm",{params:{questionId:t.valueId}}).then(function(e){if(0==e.data.status)for(var o in console.log(e),t.zhengzaizhixing=[],e.data.object){var n={value:e.data.object[o],key:o};t.zhengzaizhixing.unshift(n)}else t.$notify({title:"警告",message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)})},executionAlgorithm:function(t,e){var o=this;o.valueId=o.tableData[t].id,o.dialogVisible=!0,o.$axios.get(o.$url+"/getNotExecutingAlgorithm",{params:{questionId:o.tableData[t].id}}).then(function(t){if(0==t.data.status)for(var e in o.options=[],t.data.object){var n={value:e,label:t.data.object[e]};o.options.unshift(n)}else o.$notify({title:"警告",message:t.data.msg,type:"warning"})}).catch(function(t){console.log(t)}),o.loaded(),o.loading()},flashH:function(){var t=this;t.$axios.get(t.$url+"/getNotExecutingAlgorithm",{params:{questionId:t.valueId}}).then(function(e){if(0==e.data.status)for(var o in t.options=[],e.data.object){var n={value:o,label:e.data.object[o]};t.options.unshift(n)}else t.$notify({title:"警告",message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)}),t.loaded(),t.loading()},implement:function(){var t=this;console.log(t.valueId),t.$notify({title:"成功",message:"正在执行算法,请稍后",type:"success"}),""!=t.value&&t.$axios.get(t.$url+"/executeAlgorithm",{params:{questionId:t.valueId,key:t.value}}).then(function(e){console.log(e),0==e.data.status||t.$notify({title:"警告",message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)}),console.log(t.value)},stopcarry:function(t,e){console.log(t);var o=this;console.log(this.zhengzaizhixing[t].key),o.$axios.get(o.$url+"/stopAlgorithm",{params:{questionId:o.valueId,key:o.zhengzaizhixing[t].key}}).then(function(t){console.log(t),0==t.data.status||o.$notify({title:"警告",message:t.data.msg,type:"warning"})}).catch(function(t){console.log(t)})},stillcarry:function(t,e){},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},loadAllData:function(){var t=this;t.list=[],t.tableData=[],t.$axios.get(t.$url+"/question/getQuestions",{params:{userId:sessionStorage.getItem("userId")}}).then(function(e){if(0==e.data.status){console.log(e);var o=e.data.object;for(var n in t.list=o,o)t.tableData.unshift(t.dealData(o[n]))}else t.$notify({title:"警告",message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)})},theResult:function(t,e){console.log(t);this.dialogVisible1=!0,console.log(this.dialogVisible1),this.valueId=this.tableData[t].id,this.flashH()},checkAlgorithm:function(t,e){console.log(t),console.log(this.yizhixing[t]),console.log(this.valueId),this.$router.push({path:"/Path",query:{id:this.valueId,key:this.yizhixing[t].key}})}},mounted:function(){this.loadAllData(),console.log(sessionStorage.getItem("userId"))}},I={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"from"},[o("el-table",{staticStyle:{width:"1000px",margin:"0px auto"},attrs:{data:t.tableData}},[o("el-table-column",{attrs:{label:"项目ID",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"项目名称",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.questionName))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"准备数据",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"mouseIn",on:{click:function(o){t.prepareData(e.$index,e.row)}}},[t._v(t._s(e.row.prepareDataState))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"计算距离",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"mouseIn",on:{click:function(o){t.workDistance(e.$index,e.row)}}},[t._v(t._s(e.row.checkDataState))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"执行算法",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"mouseIn",on:{click:function(o){t.executionAlgorithm(e.$index,e.row)}}},[t._v(t._s(e.row.ExecutionAlgorithmState))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"查看结果",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"mouseIn",on:{click:function(o){t.theResult(e.$index,e.row)}}},[t._v(t._s(e.row.resultsState))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("el-pagination",{staticClass:"pagination",staticStyle:{display:"flex","justify-content":"center","margin-top":"40px"},attrs:{background:"","current-page":t.currentPage,"page-size":100,layout:"prev, pager, next, jumper",total:1e3},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}}),t._v(" "),o("el-dialog",{attrs:{title:"算法选择",visible:t.dialogVisible,width:"350px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.implement}},[t._v("执行")]),t._v(" "),0!=t.yizhixing.length?o("el-table",{staticStyle:{},attrs:{data:t.yizhixing}},[o("el-table-column",{attrs:{label:"已执行完成",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"mouseIn"},[t._v(t._s(e.row.value))])]}}])}),t._v(" "),o("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"mouseIn",staticStyle:{display:"none"}},[t._v(t._s(e.row.key))])]}}])})],1):t._e(),t._v(" "),0!=t.zhengzaizhixing.length?o("el-table",{staticStyle:{},attrs:{data:t.zhengzaizhixing}},[o("el-table-column",{attrs:{label:"正在执行",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"mouseIn"},[t._v(t._s(e.row.value))])]}}])}),t._v(" "),o("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"mouseIn",staticStyle:{display:"none"}},[t._v(t._s(e.row.key))]),o("span",{staticClass:"mouseIn",on:{click:function(o){t.stopcarry(e.$index,e.row)}}},[t._v("停止")])]}}])})],1):t._e()],1),t._v(" "),o("el-dialog",{attrs:{title:"算法详情",visible:t.dialogVisible1,width:"350px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible1=e}}},[0!=t.yizhixing.length?o("el-table",{staticStyle:{},attrs:{data:t.yizhixing}},[o("el-table-column",{attrs:{label:"已执行完成",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"mouseIn"},[t._v(t._s(e.row.value))])]}}])}),t._v(" "),o("el-table-column",{attrs:{width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticClass:"mouseIn",staticStyle:{display:"none"}},[t._v(t._s(e.row.key))]),t._v(" "),o("span",{staticClass:"mouseIn",on:{click:function(o){t.checkAlgorithm(e.$index,e.row)}}},[t._v("查看")])]}}])})],1):t._e()],1)],1)},staticRenderFns:[]};var P=o("VU/8")(k,I,!1,function(t){o("/hDB")},"data-v-b057a61a",null).exports,M=o("//Fk"),D=o.n(M),F={render:function(){var t=this.$createElement;return(this._self._c||t)("el-button",{staticClass:"returnHome",attrs:{type:"primary",round:""},on:{click:this.returnHome}},[this._v("回到首页")])},staticRenderFns:[]};var q=o("VU/8")({name:"RetrunHome",data:function(){return{input:""}},methods:{returnHome:function(){this.$router.push({path:"/"})}}},F,!1,function(t){o("KDS5")},"data-v-370c5a60",null).exports,A={data:function(){return{tableData:[],questionId:"",router:[]}},components:{},methods:{fristMap:function(t){var e=this,o=new BMap.Map(this.$refs.allmap,{enableMapClick:!1});o.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),o.enableScrollWheelZoom(!0);var n=new BMap.Geocoder;(o.addEventListener("click",function(t){var o=t.point;n.getLocation(o,function(t){t.addressComponents;console.log(t),console.log(t.address),console.log(t.point);var o={lat:t.point.lat,lng:t.point.lng,nodeAddress:t.address,nodeName:t.address,questionId:e.questionId};e.tableData.unshift(o)})}),t)&&new BMap.LocalSearch(o,{renderOptions:{map:o}}).search(t);this.$axios.get(this.$url+"/node/getQuestionNodes",{params:{questionId:e.$route.query.id}}).then(function(t){if(0==t.data.status){if(console.log(t),0!=t.data.object.length){for(var n in console.log(t.data.object),e.router=t.data.object,o.centerAndZoom(new BMap.Point(t.data.object[0].lng,t.data.object[0].lat),12),t.data.object){var a=new BMap.Marker(new BMap.Point(t.data.object[n].lng,t.data.object[n].lat));o.addOverlay(a);var i=new BMap.Label(t.data.object[n].nodeAddress,{position:new BMap.Point(t.data.object[n].lng,t.data.object[n].lat)});o.addOverlay(i)}return!0}return o.centerAndZoom(new BMap.Point(116.404,39.915),18),!1}o.centerAndZoom(new BMap.Point(116.404,39.915),18),e.$notify({title:"警告",message:response.data.msg,type:"warning"})}).then(function(t){})},handleDelete:function(t,e){console.log(t,e),this.tableData.splice(t,1)},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){console.log("当前页: "+t)},updataPoint:function(){var t=this;console.log(111);var e=this;console.log(e.tableData);var o=e.questionId;console.log(o),console.log(e.tableData.length);e.tableData,e.tableData;if(0!=e.tableData.length){var n=function(o){console.log(e.tableData[o].nodeName),t.$axios.post(t.$url+"/node/newNode",e.$qs.stringify({questionId:e.questionId,nodeName:e.tableData[o].nodeName,nodeAddress:e.tableData[o].nodeAddress,lat:e.tableData[o].lat,lng:e.tableData[o].lng})).then(function(n){0==n.data.status?(t.$notify({title:"成功",message:"点*"+e.tableData[o].nodeName+"*上传成功",type:"success"}),e.tableData=[],t.$emit("func")):e.$notify({title:"警告",message:n.data.msg,type:"warning"})})};for(var a in e.tableData)n(a)}},changePoint:function(t){this.fristMap(t)},toReload:function(){}},mounted:function(){this.questionId=this.$route.query.id,console.log("mounted"),this.$emit("loaded"),this.fristMap()}},B={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mapBox"},[o("div",{ref:"allmap",staticClass:"mapmap",attrs:{id:"allmap"}}),t._v(" "),o("div",{staticClass:"pointList"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"310"}},[o("el-table-column",{attrs:{label:"",width:"10"}},[void 0],2),t._v(" "),o("el-table-column",{attrs:{label:"点详细地址",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{model:{value:e.row.nodeAddress,callback:function(o){t.$set(e.row,"nodeAddress",o)},expression:"scope.row.nodeAddress"}})]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(o){t.handleDelete(e.$index,e.row)}}})]}}])})],1),t._v(" "),o("div",{staticClass:"updataPoint"},[o("el-button",{attrs:{type:"warning"},on:{click:t.updataPoint}},[t._v("上传所有点"),o("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1)])},staticRenderFns:[]};var V=o("VU/8")(A,B,!1,function(t){o("UHR4")},"data-v-1e9196e0",null).exports,N={name:"Index",data:function(){return{currentPage:1,excelUp:"",centerDialogVisible:!1,dialogVisible:!1,data2:[],rightValue:[],filterMethod:function(t,e){return e.pinyin.indexOf(t)>-1},centerPoint:[],serverPoint:[],checked:!1,multipleSelection:[],questionId:"",tableData:[],fileList:[]}},components:{FooterFooter:x},methods:{handleDelete:function(t,e){var o=this;console.log(t,e),console.log(this.tableData[t]),this.$axios.delete(o.$url+"/node/deleteNode",{params:{questionId:o.questionId,nodeId:o.tableData[t].nodeId}}).then(function(e){console.log(e),0==e.data.status?(o.$notify({title:"成功",message:"点"+o.tableData[t].nodeName+"删除成功",type:"success"}),o.tableData.splice(t,1)):o.$notify({title:"警告",message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)})},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){console.log("当前页: "+t)},prepareData:function(t,e){console.log(t,e),this.$router.push({path:"/DataPerpare",query:{id:"1"}})},submitUpload:function(){console.log(),this.$refs.upload.submit()},handleChange:function(t,e){this.fileList=e.slice(-3),console.log(this.fileList),"success"==this.fileList[0].status&&0==this.fileList[0].response.status&&this.getAllpoinit()},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},getAllpoinit:function(){var t=this;this.$axios.get(this.$url+"/node/getQuestionNodes",{params:{questionId:t.questionId}}).then(function(e){if(0==e.data.status){for(var o in t.tableData)0==t.tableData[o].isCenter||t.rightValue.push(parseInt(o));console.log("server"+t.serverPoint),console.log("center"+t.centerPoint)}else t.$notify({title:"警告",message:response.data.msg,type:"warning"});console.log(e),t.tableData=e.data.object}).then(function(t){})},isCenter:function(t){return 0==t?"否":"是"},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})},generateData2:function(t){console.log(t);var e=[],o=[];for(var n in t)o.push(t[n].nodeName);var a=o;o.forEach(function(t,o){e.push({label:t,key:o,pinyin:a[o]})}),this.data2=e},setCenter:function(){this.getAllpoinit(),this.dialogVisible=!0,this.generateData2(this.tableData)},centerChange:function(t,e,o){console.log(t,e,o),"right"==e?(console.log("设置中心点"),console.log(o),this.changeCenter(o)):(console.log("设置服务点"),this.changeServer(o))},updateNode:function(t,e){console.log(t);var o=this;this.$axios.patch(this.$url+"/node/updateNode",o.$qs.stringify({nodeId:t.nodeId,questionId:o.questionId,nodeName:t.nodeName,nodeAddress:t.nodeAddress,lat:t.lat,lng:t.lng,isCenter:e})).then(function(e){console.log(111111111),console.log(e),0==e.data.status?(console.log(11111111),o.$notify({title:"成功",message:"点"+t.nodeName+"设置成功",type:"success"}),o.getAllpoinit()):o.$notify({title:"警告",message:response.data.msg,type:"warning"})}).catch(function(t){this.$notify.error({title:"错误",message:"请刷新界面重新设置"})})},changeCenter:function(t){for(var e in t)console.log(t[e]),this.updateNode(this.tableData[t[e]],"1")},changeServer:function(t){for(var e in t)console.log(t[e]),this.updateNode(this.tableData[t[e]],"0")},toSingePoint:function(t){this.$router.push({path:"/SinglePoint",query:{lat:t.lat,lng:t.lng,nodeAddress:t.nodeAddress}})}},beforeCreate:function(){},mounted:function(){this.excelUp=this.$url+"/node/excelNodeInfo/"+this.$route.query.id,console.log(this.excelUp),this.questionId=this.$route.query.id,this.getAllpoinit()}},T={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"from"},[o("div",{staticClass:"templateImportBox"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!0}}},[t._v("\n      模板导入\n      "),o("i",{staticClass:"el-icon-upload el-icon--right"})])],1),t._v(" "),o("div",{staticClass:"templateImportBox"},[o("el-tag",{staticClass:"editor",on:{click:t.setCenter}},[t._v("设置中心点")])],1),t._v(" "),o("el-dialog",{attrs:{title:"设置中心点服务点",visible:t.dialogVisible,width:"600px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-transfer",{attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入地点名",data:t.data2,titles:["服务点","中心点"]},on:{change:t.centerChange},model:{value:t.rightValue,callback:function(e){t.rightValue=e},expression:"rightValue"}}),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1),t._v(" "),o("el-dialog",{staticStyle:{"font-family":"PingFang SC"},attrs:{title:"提示",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.excelUp,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1,"on-change":t.handleChange}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("上传文件")])],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("确 定")])],1)],1),t._v(" "),o("el-table",{ref:"multipleTable",staticStyle:{cursor:"pointer",width:"780px",margin:"0px auto"},attrs:{data:t.tableData}},[o("el-table-column",{attrs:{label:"地址名称",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{on:{click:function(o){t.toSingePoint(e.row)}}},[t._v(t._s(e.row.nodeName))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"地址描述",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{on:{click:function(o){t.toSingePoint(e.row)}}},[t._v(t._s(e.row.nodeAddress))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"经度",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{on:{click:function(o){t.toSingePoint(e.row)}}},[t._v(t._s(e.row.lng))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"纬度",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{on:{click:function(o){t.toSingePoint(e.row)}}},[t._v(t._s(e.row.lat))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"是否为中心点",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{on:{click:function(o){t.toSingePoint(e.row)}}},[t._v(t._s(t.isCenter(e.row.isCenter)))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("el-pagination",{staticClass:"pagination",staticStyle:{display:"flex","justify-content":"center","margin-top":"40px"},attrs:{background:"","current-page":t.currentPage,"page-size":100,layout:"prev, pager, next, jumper",total:1e3},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}}),t._v(" "),o("footer-footer")],1)},staticRenderFns:[]};var j={name:"Index",data:function(){return{nowModel:0,input:"",inputStyle:"width:180px;margin-left:200px;z-index:1",MapMap:"MapMap",PointList:"PointList",currentView:"MapMap"}},components:{RetrunHome:q,MapMap:V,PointList:o("VU/8")(N,T,!1,function(t){o("+oP0")},"data-v-c6f2cb04",null).exports,HeaderHeader:y,FooterFooter:x},methods:{changeNowmodel:function(){console.log(7844455);0==this.nowModel?(this.nowModel=1,this.currentView="PointList"):(this.nowModel=0,this.currentView="MapMap")},changemodel:function(){this.changeNowmodel()},searchPoint:function(){var t=this,e=this;1==e.nowModel&&(e.nowModel=0,e.currentView="MapMap"),new D.a(function(){}),setTimeout(function(){""!=e.input&&t.$refs.mychild.changePoint(e.input)},2e3)},getAllpoinit:function(){var t=this;this.$axios.get(this.$url+"/node/getQuestionNodes",{params:{questionId:t.$route.query.id}}).then(function(e){if(0==e.data.status)return console.log(e),0!=e.data.object.length&&(console.log(e.data.object),t.router=e.data.object,!0);t.$notify({title:"警告",message:response.data.msg,type:"warning"})}).then(function(t){})},toNext:function(){var t=this,e=this;this.$axios.get(this.$url+"/node/getQuestionNodes",{params:{questionId:e.$route.query.id}}).then(function(o){console.log(o),0==o.data.status?0!=o.data.object.length?t.$router.push({path:"/VehiclePerpare",query:{id:e.$route.query.id}}):t.$notify({title:"警告",message:"请先导入点",type:"warning"}):e.$notify({title:"警告",message:response.data.msg,type:"warning"})})},toReload:function(){}},beforeCreate:function(){console.log(this.$route.query.id)},beforeMount:function(){},mounted:function(){}},R={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"all"},[o("div",{staticClass:"header"},[o("el-input",{style:t.inputStyle,attrs:{placeholder:"请输入地点","suffix-icon":"el-icon-search"},on:{change:t.searchPoint},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),o("el-button",{staticClass:"modelChange",attrs:{type:"primary",round:""},on:{click:t.changemodel}},[t._v("模式切换")]),t._v(" "),o("retrun-home",{staticClass:"returnHome"}),t._v(" "),o("el-button",{staticClass:"next",attrs:{type:"primary"},on:{click:t.toNext}},[t._v("下一步")])],1),t._v(" "),o(t.currentView,{ref:"mychild",tag:"div",on:{func:t.changeNowmodel}})],1)},staticRenderFns:[]};var E=o("VU/8")(j,R,!1,function(t){o("iK33")},"data-v-02fd2c70",null).exports,L={data:function(){return{dialogVisible:!1,mchange:{marginRight:"0px"},add:{display:"none"},fileList1:[],fileList2:[],fileList3:[],input:"",items:[{title:"路线最短",content:"xxxxxxxx"}],uploadBotton:"false",object:"",doUpload1:this.$url+"/node/excelNodeInfo/",doUpload2:this.$url+"/node/excelNodeInfo/",doUpload3:this.$url+"/vehicleSystem/excelVehicleInfo/",questionId:"",disabled:!0,loaded:["false","false","false"],finalSolution:[],navImport:"display:block",navrun:"display:none"}},components:{},methods:{fristMap:function(){var t=new BMap.Map(this.$refs.allmap,{enableMapClick:!1});t.centerAndZoom(new BMap.Point(116.404,39.915),18),t.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),t.enableScrollWheelZoom(!0),t.addEventListener("click",function(t){console.log(t)})},enter:function(t){var e=this;console.log(1);var o=0,n=setInterval(function(){e.mchange="marginRight:"+o+++"px",console.log(o),o>50&&clearTimeout(n)},1)},leave:function(t){var e=this,o=50,n=setInterval(function(){e.mchange="marginRight:"+o--+"px",console.log(o),o<0&&clearTimeout(n)},1)},createQuestion:function(t){var e=this;console.log(t),this.$axios.post(this.$url+"/question/insertQuestion",this.$qs.stringify({questionName:this.input,userId:sessionStorage.getItem("userId")})).then(function(t){e.questionId=t.data.object,200!=t.data.status?e.uploadBotton="false":(e.uploadBotton="true",e.disabled=!1,e.doUpload1=e.doUpload1+e.questionId,e.doUpload2=e.doUpload2+e.questionId,e.doUpload3=e.doUpload3+e.questionId)}).catch(function(t){console.log(t),console.log(22)})},handleChange1:function(t,e){this.fileList1=e.slice(-3),console.log(this.fileList1)},handleChange2:function(t,e){this.fileList2=e.slice(-3),console.log(e)},handleChange3:function(t,e){this.fileList3=e.slice(-3),console.log(e)},workOut:function(t){var e=this;console.log(t),this.$axios.get(this.$url+"/question/executeAlgorithm",{params:{questionId:e.questionId}}).then(function(t){console.log(t),console.log(1),e.navImport="display:none",e.navrun="display:block",e.uploadSolution()}).catch(function(t){console.log(t),console.log(22)})},to_Import:function(){this.navImport="display:block",this.navrun="display:none"},uploadSolution:function(){var t=this;this.$axios.get(this.$url+"/finalSolution/getAllFinalSolution",{params:{questionId:t.questionId}}).then(function(e){for(var o in console.log(e),e.data.object)e.data.object[o].name="方案"+o;t.finalSolution=e.data.object,console.log(t.finalSolution),console.log(1)}).catch(function(t){console.log(t),console.log(22)})},lushu:function(t,e,o){var n=new BMap.Map(this.$refs.allmap,{enableMapClick:!1});return n.centerAndZoom(new BMap.Point(e[0][0].lng,e[0][0].lat),10),n.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),n.enableScrollWheelZoom(!0),n.addEventListener("click",function(t){console.log(t)}),new D.a(function(a,i){console.log(e);var s=new BMap.DrivingRoute("重庆市",{onSearchComplete:function(e){if(s.getStatus()==BMAP_STATUS_SUCCESS){for(var a=e.getPlan(0),i=[],l=0;l<a.getNumRoutes();l++){var r=a.getRoute(l);i=i.concat(r.getPath())}n.addOverlay(new BMap.Polyline(i,{strokeColor:o[t]})),t+=1,n.setViewport(i),new BMapLib.LuShu(n,i,{defaultContent:"",autoView:!1,icon:new BMap.Icon("http://lbsyun.baidu.com/jsdemo/img/car.png",new BMap.Size(52,26),{anchor:new BMap.Size(27,13)}),speed:12e3,enableRotation:!0,length:1}).start()}}});for(var l in e){var r=new BMap.Point(e[l][0].lng,e[l][0].lat),c=r,u=[];for(var d in e[l])u.push(new BMap.Point(e[l][d].lng,e[l][d].lat));s.search(r,c,{waypoints:u})}})},Solution:function(t){console.log(t);var e=this.finalSolution[t].routes;this.lushu(0,e,["#111","red","green","blue","purple","#EE7600"]),console.log(e)}},mounted:function(){console.log("mounted"),this.$emit("loaded"),this.fristMap()}},z={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mapBox"},[o("div",{ref:"allmap",staticClass:"mapmap",attrs:{id:"allmap"}}),t._v(" "),o("div",{staticClass:"add",style:t.add,on:{mouseenter:function(e){t.enter()},mouseleave:function(e){t.leave()}}},[o("div",{staticClass:"show",style:t.mchange},[o("i",{staticClass:"el-icon-plus"})])]),t._v(" "),o("div",{staticClass:"step",style:t.navImport},[t._m(0),t._v(" "),o("div",{staticClass:"questionbox"},[o("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入问题名称"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:t.createQuestion}},[t._v("确定")])],1),t._v(" "),o("div",{staticClass:"centerInput"},[o("span",{staticClass:"centerTips"},[t._v("中心点导入")]),t._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{action:t.doUpload1,"on-change":t.handleChange1,"file-list":t.fileList1,limit:1}},[o("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"small",type:"primary",disabled:t.disabled}},[t._v("点击上传")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),o("div",{staticClass:"centerInput"},[o("span",{staticClass:"centerTips"},[t._v("服务点导入")]),t._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{action:t.doUpload2,"on-change":t.handleChange2,"file-list":t.fileList2,limit:1}},[o("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"small",type:"primary",disabled:t.disabled}},[t._v("点击上传")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),o("div",{staticClass:"centerInput"},[o("span",{staticClass:"centerTips"},[t._v("车辆信息导入")]),t._v(" "),o("el-upload",{staticClass:"upload-demo",attrs:{action:t.doUpload3,"on-change":t.handleChange3,"file-list":t.fileList3,disabled:t.disabled}},[o("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"small",type:"primary",disabled:t.disabled}},[t._v("点击上传")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),o("div",{staticClass:"workout"},[o("el-button",{attrs:{type:"primary",size:"small",disabled:t.disabled},on:{click:t.workOut}},[t._v("开始计算")])],1)]),t._v(" "),o("div",{staticClass:"step",style:t.navrun},[o("i",{staticClass:"el-icon-back",on:{click:t.to_Import}}),t._v(" "),o("div",{staticClass:"mtitle"},[t._v("方案展示")]),t._v(" "),t._l(t.finalSolution,function(e,n){return o("div",{staticClass:"mshow"},[o("div",{staticClass:"mtips",on:{click:function(e){t.Solution(n)}}},[t._v(t._s(e.name)+" "),o("span",[t._v("总距离: "+t._s(e.totalDis))])])])})],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"search"},[e("span",{staticClass:"searchTip tip"},[this._v("创建问题")])])}]};var U=o("VU/8")(L,z,!1,function(t){o("4fUq")},"data-v-664724a2",null).exports,O={data:function(){return{}},methods:{},mounted:function(){var t=this.$route.query.lat,e=this.$route.query.lng,o=this.$route.query.nodeAddress,n=new BMap.Map(this.$refs.allmap,{enableMapClick:!1});n.centerAndZoom(new BMap.Point(e,t),14);var a=new BMap.Marker(new BMap.Point(e,t));n.addOverlay(a);var i=new BMap.Label(o,{position:new BMap.Point(e,t)});n.addOverlay(i),n.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),n.enableScrollWheelZoom(!0);new BMap.Geocoder}},H={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{ref:"allmap",staticClass:"mapmap",attrs:{id:"allmap"}})])},staticRenderFns:[]};var W=o("VU/8")(O,H,!1,function(t){o("+iJY")},null,null).exports,Y={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var Q=o("VU/8")({data:function(){return{}},methods:{},mounted:function(){this.$router.go(0),this.$router.push({path:"/DataPerpare",query:{id:this.$route.query.id}})}},Y,!1,function(t){o("KX9U")},null,null).exports,Z={name:"VehicleList",data:function(){return{tableData:[{id:0,date:"2016-05-02",name:"拉拉",address:"上海市普陀区金沙江路 1518 弄"}],centerDialogVisible:!1,fileList:[],uploadV:""}},methods:{handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){console.log(t,e),console.log(this.tableData[t]),this.$axios.delete(this.$url+"/vehicleSystem/user/vehicle",{params:[this.tableData[t]]},{headers:{"content-type":"application/json;charset=UTF-8"}}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},getAllV:function(){var t=this;t.$axios.get(t.$url+"/vehicleSystem/user/vehicle",{params:{questionId:this.$route.query.id}}).then(function(e){console.log(e),t.tableData=e.data.object}).catch(function(t){console.log(t)})}},mounted:function(){console.log(this.$route.query.id);this.uploadV=this.$url+"/vehicleSystem/excelVehicleInfo/"+this.$route.query.id,this.getAllV()}},X={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"from"},[o("div",{staticClass:"templateImportBox"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!0}}},[t._v("\n      模板导入\n      "),o("i",{staticClass:"el-icon-upload el-icon--right"})])],1),t._v(" "),o("el-dialog",{staticStyle:{"font-family":"PingFang SC"},attrs:{title:"提示",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.uploadV,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("上传文件")])],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("确 定")])],1)],1),t._v(" "),o("el-table",{staticStyle:{width:"750px",margin:"0px auto"},attrs:{data:t.tableData}},[o("el-table-column",{attrs:{label:"车辆ID",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.vehicleId))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"车辆类型",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("p",[t._v(t._s(e.row.type))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"载货量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("p",[t._v(t._s(e.row.capacity))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"排量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("p",[t._v(t._s(e.row.oil))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"运费",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("p",[t._v(t._s(e.row.price))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var K={name:"VehicleList",data:function(){return{tableData:[{id:0,date:"2016-05-02",name:"拉拉",address:"上海市普陀区金沙江路 1518 弄"}],centerDialogVisible:!1,fileList:[],uploadV:"",dialogFormVisible:!1,form:{type:"",capacity:"",oil:"",price:"",date:""},rules2:{type:[{validator:function(t,e,o){if(!e)return o(new Error("车辆类型不能为空"));setTimeout(function(){o()},500)},trigger:"blur"}],capacity:[{validator:function(t,e,o){if(!e)return o(new Error("车辆容量不能为空"));setTimeout(function(){/^[0-9]*$/.test(e)?o():o(new Error("请输入数字"))},500)},trigger:"blur"}],oil:[{validator:function(t,e,o){if(!e)return o(new Error("用户名不能为空"));setTimeout(function(){/^[0-9]*$/.test(e)?o():o(new Error("请输入数字"))},500)},trigger:"blur"}],price:[{validator:function(t,e,o){if(!e)return o(new Error("用户名不能为空"));setTimeout(function(){/^[0-9]*$/.test(e)?o():o(new Error("请输入数字"))},500)},trigger:"blur"}],date:[{validator:function(t,e,o){if(!e)return o(new Error("用户名不能为空"));setTimeout(function(){o()},500)},trigger:"blur"}]},formLabelWidth:"120px"}},components:{FooterFooter:x},methods:{handleEdit:function(t,e){console.log(t,e)},handleDelete:function(t,e){var o=this;console.log(t,e),console.log(o.tableData[t]),this.$axios.delete(o.$url+"/vehicleSystem/user/vehicle",{params:{vehicleId:o.tableData[t].vehicleId,questionId:o.$route.query.id}},{headers:{"content-type":"application/json;charset=UTF-8"}}).then(function(e){console.log(e),0==e.data.status?o.tableData.splice(t,1):o.$notify({title:"警告",message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)})},submitUpload:function(){this.$refs.upload.submit()},handleChange:function(t,e){this.fileList=e.slice(-3),console.log(this.fileList),"success"==this.fileList[0].status&&0==this.fileList[0].response.status&&this.getAllV()},handleRemove:function(t,e){console.log(t,e)},handlePreview:function(t){console.log(t)},getAllV:function(){var t=this;t.$axios.get(t.$url+"/vehicleSystem/user/vehicle",{params:{questionId:this.$route.query.id}}).then(function(e){0==e.data.status?(console.log(e),t.tableData=e.data.object):t.$notify({title:"警告",message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)})},setCenter:function(){this.dialogFormVisible=!0},handsubmit:function(){var t=this;console.log(this.form),console.log(this.form.date.getFullYear()+"-"+(this.form.date.getMonth()<10?"0"+this.form.date.getMonth():this.form.date.getMonth())+"-"+(this.form.date.getDate()<10?"0"+this.form.date.getDate():this.form.date.getDate()));var e=this;""!=this.form.type&&""!=this.form.capacity&&""!=this.form.oil&&""!=this.form.price&&""!=this.form.date&&this.$axios.post(this.$url+"/vehicleSystem/user/vehicle",e.$qs.stringify({type:e.form.type,capacity:e.form.capacity,oil:e.form.oil,price:e.form.price,date:this.form.date.getFullYear()+"-"+(this.form.date.getMonth()+1<10?"0"+(this.form.date.getMonth()+1):this.form.date.getMonth()+1)+"-"+(this.form.date.getDate()<10?"0"+this.form.date.getDate():this.form.date.getDate()),ownerId:parseInt(sessionStorage.getItem("userId")),questionId:e.$route.query.id})).then(function(o){0==o.data.status?(t.$notify({title:"成功",message:"车辆添加成功",type:"success"}),t.dialogFormVisible=!1,e.form={type:"",capacity:"",oil:"",price:"",date:""},console.log(o),e.getAllV()):e.$notify({title:"警告",message:response.data.msg,type:"warning"})})},handsubmitTest:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.handsubmit()})},handleClose:function(t){this.$confirm("确认关闭？").then(function(e){t()}).catch(function(t){})}},mounted:function(){console.log(this.$route.query.id);this.uploadV=this.$url+"/vehicleSystem/excelVehicleInfo/"+this.$route.query.id,this.getAllV()}},G={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"from"},[o("div",{staticClass:"templateImportBox"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!0}}},[t._v("\n      车辆导入\n      "),o("i",{staticClass:"el-icon-upload el-icon--right"})])],1),t._v(" "),o("div",{staticClass:"templateImportBox"},[o("el-tag",{staticClass:"editor",on:{click:t.setCenter}},[t._v("手动增加车辆")])],1),t._v(" "),o("el-dialog",{attrs:{"before-close":t.handleClose,title:"车辆信息",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.form,"status-icon":"",rules:t.rules2,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"车辆类型","label-width":t.formLabelWidth,prop:"type"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type "}})],1),t._v(" "),o("el-form-item",{attrs:{label:"车辆容量","label-width":t.formLabelWidth,prop:"capacity"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.capacity,callback:function(e){t.$set(t.form,"capacity",e)},expression:"form.capacity "}})],1),t._v(" "),o("el-form-item",{attrs:{label:"车辆耗油量","label-width":t.formLabelWidth,prop:"oil"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.oil,callback:function(e){t.$set(t.form,"oil",e)},expression:"form.oil "}})],1),t._v(" "),o("el-form-item",{attrs:{label:"车辆价格","label-width":t.formLabelWidth,prop:"price"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price "}})],1),t._v(" "),o("el-form-item",{attrs:{label:"车辆生产日期","label-width":t.formLabelWidth,prop:"capacity"}},[o("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handsubmitTest("ruleForm2")}}},[t._v("确 定")])],1)],1),t._v(" "),o("el-dialog",{staticStyle:{"font-family":"PingFang SC"},attrs:{title:"提示",visible:t.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.uploadV,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,"auto-upload":!1,"on-change":t.handleChange}},[o("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),o("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传到服务器")]),t._v(" "),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("上传文件")])],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.centerDialogVisible=!1}}},[t._v("确 定")])],1)],1),t._v(" "),o("el-table",{staticStyle:{width:"750px",margin:"0px auto"},attrs:{data:t.tableData}},[o("el-table-column",{attrs:{label:"车辆ID",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.vehicleId))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"车辆类型",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("p",[t._v(t._s(e.row.type))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"载货量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("p",[t._v(t._s(e.row.capacity))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"排量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("p",[t._v(t._s(e.row.oil))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"运费",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("p",[t._v(t._s(e.row.price))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("footer-footer")],1)},staticRenderFns:[]};var J={name:"vehiclePerpare",data:function(){return{VehicleList:"VehicleList",VehicleEditor:"VehicleEditor",nowModel:0,currentView:"VehicleEditor",inputStyle:"margin-left:200px;z-index:1"}},components:{RetrunHome:q,VehicleList:o("VU/8")(Z,X,!1,function(t){o("KBG/")},"data-v-2237e79e",null).exports,VehicleEditor:o("VU/8")(K,G,!1,function(t){o("VkQN")},"data-v-502d2b37",null).exports},methods:{toPrevious:function(){this.$router.push({path:"/DataPerpare",query:{id:this.$route.query.id}})},finish:function(){var t=this;t.$axios.get(t.$url+"/vehicleSystem/user/vehicle",{params:{questionId:this.$route.query.id}}).then(function(e){0==e.data.status?(console.log(e),0!=e.data.object.length?(t.$notify({title:"数据导入成功",message:"三秒钟后跳转到主页",type:"success"}),setTimeout(function(){t.$router.push({path:"/"})},3e3)):t.$notify({title:"警告",message:"请先导入车辆",type:"warning"})):t.$notify({title:"警告",message:e.data.msg,type:"warning"})}).catch(function(t){console.log(t)})},changeNowmodel:function(){console.log(7844455);0==this.nowModel?(this.nowModel=1,this.currentView="VehicleEditor"):(this.nowModel=0,this.currentView="VehicleList")},changemodel:function(){this.changeNowmodel()}},beforeCreate:function(){console.log(this.$route.query.id)},mounted:function(){}},tt={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"all"},[o("div",{staticClass:"header"},[o("retrun-home",{staticClass:"returnHome",style:t.inputStyle}),t._v(" "),o("el-button",{staticClass:"modelChange",attrs:{type:"primary",round:""}},[t._v("模式切换")]),t._v(" "),o("div",{staticClass:"buttonBox"},[o("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:t.toPrevious}},[t._v("上一步")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.finish}},[t._v("完成")])],1)],1),t._v(" "),o(t.currentView,{ref:"mychild",tag:"div",on:{func:t.changeNowmodel}})],1)},staticRenderFns:[]};var et=o("VU/8")(J,tt,!1,function(t){o("LW4e")},"data-v-41a0fdd0",null).exports,ot=(o("OTV4"),{data:function(){return{dialogVisible:!1,questionId:"",disabled:!0,loaded:["false","false","false"],finalSolution:[],navImport:"display:block",navrun:"display:block",tableData2:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}]}},components:{HeaderHeader:y},methods:{tableRowClassName:function(t){t.row;var e=t.rowIndex;return 1===e?"warning-row":3===e?"success-row":""},fristMap:function(){var t=new BMap.Map(this.$refs.allmap,{enableMapClick:!1});t.centerAndZoom(new BMap.Point(116.404,39.915),18),t.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),t.enableScrollWheelZoom(!0),t.addEventListener("click",function(t){console.log(t)})},enter:function(t){var e=this;console.log(1);var o=0,n=setInterval(function(){e.mchange="marginRight:"+o+++"px",console.log(o),o>50&&clearTimeout(n)},1)},leave:function(t){var e=this,o=50,n=setInterval(function(){e.mchange="marginRight:"+o--+"px",console.log(o),o<0&&clearTimeout(n)},1)},createQuestion:function(t){var e=this;console.log(t),this.$axios.post(this.$url+"/question/insertQuestion",this.$qs.stringify({questionName:this.input,userId:sessionStorage.getItem("userId")})).then(function(t){e.questionId=t.data.object,200!=t.data.status?e.uploadBotton="false":(e.uploadBotton="true",e.disabled=!1,e.doUpload1=e.doUpload1+e.questionId,e.doUpload2=e.doUpload2+e.questionId,e.doUpload3=e.doUpload3+e.questionId)}).catch(function(t){console.log(t),console.log(22)})},handleChange1:function(t,e){this.fileList1=e.slice(-3),console.log(this.fileList1)},handleChange2:function(t,e){this.fileList2=e.slice(-3),console.log(e)},handleChange3:function(t,e){this.fileList3=e.slice(-3),console.log(e)},workOut:function(t){var e=this;console.log(t),this.$axios.get(this.$url+"/question/executeAlgorithm",{params:{questionId:e.questionId}}).then(function(t){console.log(t),console.log(1),e.navImport="display:none",e.navrun="display:block",e.uploadSolution()}).catch(function(t){console.log(t),console.log(22)})},uploadSolution:function(){var t=this;this.$axios.get(this.$url+"/finalSolution/getAllFinalSolution",{params:{questionId:t.questionId}}).then(function(e){for(var o in console.log(e),e.data.object)e.data.object[o].name="方案"+o;t.finalSolution=e.data.object,console.log(t.finalSolution),console.log(1)}).catch(function(t){console.log(t),console.log(22)})},lushu:function(t,e,o){console.log(e);var n=new BMap.Map(this.$refs.allmap,{enableMapClick:!1});return n.centerAndZoom(new BMap.Point(e[0][0].lng,e[0][0].lat),10),n.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),n.enableScrollWheelZoom(!0),n.addEventListener("click",function(t){console.log(t)}),new D.a(function(a,i){console.log(e);var s=new BMap.DrivingRoute(n,{onSearchComplete:function(e){if(s.getStatus()==BMAP_STATUS_SUCCESS){console.log(e);for(var a=e.getPlan(0),i=[],l=0;l<a.getNumRoutes();l++){var r=a.getRoute(l);i=i.concat(r.getPath())}n.addOverlay(new BMap.Polyline(i,{strokeColor:o[t]})),t+=1,n.setViewport(i),console.log(i),new BMapLib.LuShu(n,i,{defaultContent:"",autoView:!1,icon:new BMap.Icon("http://lbsyun.baidu.com/jsdemo/img/car.png",new BMap.Size(52,26),{anchor:new BMap.Size(27,13)}),speed:12e3,enableRotation:!0,length:1}).start()}}});for(var l in e){var r=new BMap.Point(e[l][0].lng,e[l][0].lat),c=r,u=[];for(var d in e[l]){if(console.log(e[l].length),e[l][0].nodeAddr==e[l][e[l].length-1].nodeAddr){var p=new BMap.Marker(new BMap.Point(e[l][d].lng,e[l][d].lat));n.addOverlay(p);var h=new BMap.Label("起始/终点:"+e[l][0].nodeAddr,{position:new BMap.Point(e[l][0].lng,e[l][0].lat)});n.addOverlay(h)}if(0!=d&&d!=e[l].length-1){p=new BMap.Marker(new BMap.Point(e[l][d].lng,e[l][d].lat));n.addOverlay(p);h=new BMap.Label("途径点:"+e[l][d].nodeAddr,{position:new BMap.Point(e[l][d].lng,e[l][d].lat)});n.addOverlay(h)}if(0==d&&e[l][0].nodeAddr!=e[l][e[l].length-1].nodeAddr){p=new BMap.Marker(new BMap.Point(e[l][d].lng,e[l][d].lat));n.addOverlay(p);h=new BMap.Label("起点:"+e[l][d].nodeAddr,{position:new BMap.Point(e[l][d].lng,e[l][d].lat)});n.addOverlay(h)}if(d==e[l].length-1&&e[l][0].nodeAddr!=e[l][e[l].length-1].nodeAddr){p=new BMap.Marker(new BMap.Point(e[l][d].lng,e[l][d].lat));n.addOverlay(p);h=new BMap.Label("终点:"+e[l][d].nodeAddr,{position:new BMap.Point(e[l][d].lng,e[l][d].lat)});n.addOverlay(h)}u.push(new BMap.Point(e[l][d].lng,e[l][d].lat))}console.log(u),n.setViewport(u),s.search(r,c,{waypoints:u})}})},getOneVersionFinalSolution:function(){console.log(this.$route.query.id),console.log(this.$route.query.key),this.tableData2=[];var t=this;t.$axios.get(t.$url+"/finalSolution/getOneVersionFinalSolution",{params:{questionId:parseInt(t.$route.query.id),key:parseInt(t.$route.query.key)}}).then(function(e){if(console.log(e),0==e.data.status){var o={};for(var n in e.data.object)o=e.data.object[n],t.tableData2.push(o)}}).catch(function(t){console.log(t)})},getDetail:function(t,e){var o=this;console.log(o.tableData2[t].finalSolutionId),o.$axios.get(o.$url+"/finalSolution/getFinalSolution",{params:{finalSolutionId:o.tableData2[t].finalSolutionId}}).then(function(t){if(console.log(t),0==t.data.status){var e=t.data.object.routes;o.lushu(0,e,["#111","red","green","blue","purple","#EE7600"]),console.log(e),console.log(11)}}).catch(function(t){console.log(t)})}},mounted:function(){console.log("mounted"),this.$emit("loaded"),this.fristMap(),this.getOneVersionFinalSolution()}}),nt={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mapBox"},[o("header-header"),t._v(" "),o("div",{ref:"allmap",staticClass:"mapmap",attrs:{id:"allmap"}}),t._v(" "),o("div",{staticClass:"step",style:t.navrun},[o("div",{staticClass:"mtitle"},[t._v("方案展示")]),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData2,"row-class-name":t.tableRowClassName}},[o("el-table-column",{attrs:{label:"",width:"30"}}),t._v(" "),o("el-table-column",{attrs:{label:"方案Id",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.finalSolutionId))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"方案距离",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(e.row.totalDis)+"米")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"地址"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{staticStyle:{display:"none"}},[t._v(t._s(e.row.key))]),t._v(" "),o("span",{staticClass:"mouseIn",on:{click:function(o){t.getDetail(e.$index,e.row)}}},[t._v("查看")])]}}])})],1)],1)],1)},staticRenderFns:[]};var at=o("VU/8")(ot,nt,!1,function(t){o("hhh4")},"data-v-630da52c",null).exports,it={data:function(){return{canvas:null,ctx:null,points:[]}},watch:{points:function(){for(var t=0;t<this.points.length;t++)this.points[t].index=t+1}},mounted:function(){this.initCanvas()},methods:{initCanvas:function(){this.canvas=document.getElementById("map"),this.ctx=this.canvas.getContext("2d")},drawPoint:function(t,e,o,n,a){t.fillStyle=a,t.beginPath(),t.arc(e,o,n,0,2*Math.PI,!0),t.fill()},clickToDrawPoint:function(t){var e=this.getMousePos(this.canvas,t);this.drawPoint(this.ctx,e.x,e.y,10,"#409EFF"),this.points.push(e)},getMousePos:function(t,e){var o=t.getBoundingClientRect();return{x:(e.clientX-o.left*(t.width/o.width)).toFixed(0),y:(e.clientY-o.top*(t.height/o.height)).toFixed(0)}},deletePoint:function(t){if(isNaN(t)||t>this.points.length)return!1;var e=this.points[t];this.drawPoint(this.ctx,e.x,e.y,10,"#888");for(var o=0,n=0;o<this.points.length;o++)this.points[o]!=this.points[t]&&(this.points[n++]=this.points[o]);this.points.length-=1;for(var a=0;a<this.points.length;a++)this.points[a].index=a+1;this.$forceUpdate()},storeCenterPoint:function(){this.$store.commit("setCenterPoints",this.points),this.$emit("toRoutePoint")}}},st={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main"},[o("el-row",{staticClass:"content"},[o("el-col",{staticClass:"canvasMap",attrs:{span:18}},[o("canvas",{attrs:{id:"map",width:"1200px",height:"800px"},on:{click:t.clickToDrawPoint}},[t._v("\n          当前浏览器不支持Canvas，请升级浏览器或更换浏览器访问。\n        ")])]),t._v(" "),o("el-col",{staticClass:"side",attrs:{span:4}},t._l(t.points,function(e){return o("el-row",{key:e.index,staticClass:"pointInfo",attrs:{type:"flex",justify:"space-between"}},[o("el-col",{staticClass:"index",attrs:{span:4}},[o("el-tag",[t._v(t._s(e.index))])],1),t._v(" "),o("el-col",{staticClass:"xy",attrs:{span:12}},[t._v("\n            X:"+t._s(e.x)+"  Y:"+t._s(e.y)+"\n          ")]),t._v(" "),o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(o){t.deletePoint(--e.index)}}})],1)],1)}),1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:4,offset:18}},[o("el-button",{staticClass:"nextStepBtn",attrs:{type:"success"},on:{click:t.storeCenterPoint}},[t._v("选择路径点按钮")])],1)],1)],1)},staticRenderFns:[]};var lt=o("VU/8")(it,st,!1,function(t){o("60Sd")},"data-v-29fde606",null).exports,rt=o("mw3O"),ct=o.n(rt),ut={data:function(){return{canvas:null,ctx:null,points:[],qid:0}},watch:{points:function(){for(var t=0;t<this.points.length;t++)this.points[t].index=t+1}},mounted:function(){this.initCanvas(),this.drawCenterPoints(),this.getMostNum()},methods:{initCanvas:function(){this.canvas=document.getElementById("map"),this.ctx=this.canvas.getContext("2d")},drawCenterPoints:function(){for(var t=this.$store.getters.getCenterPoints,e=0;e<t.length;e++)this.drawPoint(this.ctx,t[e].x,t[e].y,10,"#409EFF")},drawPoint:function(t,e,o,n,a){t.fillStyle=a,t.beginPath(),t.arc(e,o,n,0,2*Math.PI,!0),t.fill()},clickToDrawPoint:function(t){var e=this.getMousePos(this.canvas,t);this.drawPoint(this.ctx,e.x,e.y,8,"white"),this.points.push(e)},getMousePos:function(t,e){var o=t.getBoundingClientRect();return{x:(e.clientX-o.left*(t.width/o.width)).toFixed(0),y:(e.clientY-o.top*(t.height/o.height)).toFixed(0)}},deletePoint:function(t){if(isNaN(t)||t>this.points.length)return!1;var e=this.points[t];this.drawPoint(this.ctx,e.x,e.y,10,"#888");for(var o=0,n=0;o<this.points.length;o++)this.points[o]!=this.points[t]&&(this.points[n++]=this.points[o]);this.points.length-=1;for(var a=0;a<this.points.length;a++)this.points[a].index=a+1;this.$forceUpdate()},toLastStep:function(){this.$emit("toCenterPoint")},uploadPoints:function(t,e){var o=this,n=this.$store.getters.getCenterPoints,a=this.$store.getters.getRoutePoints,i=[],s=[],l=[!1,!1];for(var r in n)i[r]={userId:t,questionId:e,posId:parseInt(r)+1,posX:n[r].x,posY:n[r].y,isCenter:1};var c=i.length;for(var u in a)s[u]={userId:t,questionId:e,posId:parseInt(c+u)+1,posX:a[u].x,posY:a[u].y,isCenter:0};this.$axios.post(this.$url+"/demoNode/demoNewNodes",{jsonArray:i},{ContentType:"application/json"}).then(function(t){console.log(t),0===t.data.status?(o.$notify({title:"成功",message:"录入中心点成功",type:"success"}),l[0]=!0,l[0]&&l[1]&&o.$emit("toSelectVehicle")):o.$notify({title:"失败",message:"录入中心点失败",type:"warning"})}),this.$axios.post(this.$url+"/demoNode/demoNewNodes",{jsonArray:s},{ContentType:"application/json"}).then(function(t){console.log(t),0===t.data.status?(o.$notify({title:"成功",message:"录入路径点成功",type:"success"}),l[1]=!0,l[0]&&l[1]&&o.$emit("toSelectVehicle")):o.$notify({title:"失败",message:"录入路径点点失败",type:"warning"})})},getMostNum:function(){var t=this;this.$axios.get(this.$url+"/demoNode/demoNodeMaxQuestionId",{params:{userId:3}}).then(function(e){0===e.data.status?(t.qid=e.data.object+1,t.$store.commit("setQid",e.data.object+1)):t.$notify({title:"失败",message:e.data.msg,type:"warning"})})},storeCenterPoint:function(){this.$store.commit("setRoutePoints",this.points);var t=this.qid;console.log(t),this.uploadPoints(3,t)}}},dt={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"main"},[o("el-row",{staticClass:"content"},[o("el-col",{staticClass:"canvasMap",attrs:{span:18}},[o("canvas",{attrs:{id:"map",width:"1200px",height:"800px"},on:{click:t.clickToDrawPoint}},[t._v("\n          当前浏览器不支持Canvas，请升级浏览器或更换浏览器访问。\n        ")])]),t._v(" "),o("el-col",{staticClass:"side",attrs:{span:4}},t._l(t.points,function(e){return o("el-row",{key:e.index,staticClass:"pointInfo",attrs:{type:"flex",justify:"space-between"}},[o("el-col",{staticClass:"index",attrs:{span:4}},[o("el-tag",[t._v(t._s(e.index))])],1),t._v(" "),o("el-col",{staticClass:"xy",attrs:{span:12}},[t._v("\n            X:"+t._s(e.x)+"  Y:"+t._s(e.y)+"\n          ")]),t._v(" "),o("el-col",{attrs:{span:4}},[o("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(o){t.deletePoint(--e.index)}}})],1)],1)}),1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:4,offset:13}},[o("el-button",{staticClass:"lastStepBtn",attrs:{type:"info"},on:{click:t.toLastStep}},[t._v("返回上一步")])],1),t._v(" "),o("el-col",{attrs:{span:4,offset:1}},[o("el-button",{staticClass:"nextStepBtn",attrs:{type:"success"},on:{click:t.storeCenterPoint}},[t._v("生成路径")])],1)],1)],1)},staticRenderFns:[]};var pt={data:function(){return{canvas:null,ctx:null,routes:[]}},mounted:function(){this.getRoutes(),this.initCanvas()},methods:{getRoutes:function(){var t=this,e=this.$store.getters.getQid;this.$axios.post(this.$url+"/demoNode/demoSolution",ct.a.stringify({questionId:e,userId:3})).then(function(e){console.table(e.data.object),0===e.data.status?(t.$notify({title:"成功",message:"获取路径成功",type:"success"}),t.routes=e.data.object,t.drawRoutes()):t.$notify({title:"失败",message:e.data.msg,type:"warning"})})},initCanvas:function(){this.canvas=document.getElementById("map"),this.ctx=this.canvas.getContext("2d")},drawPoint:function(t,e,o,n,a){t.fillStyle=a,t.beginPath(),t.arc(e,o,n,0,2*Math.PI,!0),t.fill(),t.closePath()},getMousePos:function(t,e){var o=t.getBoundingClientRect();return{x:e.clientX-o.left*(t.width/o.width),y:e.clientY-o.top*(t.height/o.height)}},drawRoute:function(t){for(var e in this.ctx.beginPath(),this.ctx.lineWidth=3,this.ctx.strokeStyle=this.randomColor(),t)0==e?this.ctx.moveTo(t[e].posX,t[e].posY):this.ctx.lineTo(t[e].posX,t[e].posY);for(var o in this.ctx.stroke(),t)0==o?this.drawPoint(this.ctx,t[o].posX,t[o].posY,10,"#409EFF"):this.drawPoint(this.ctx,t[o].posX,t[o].posY,8,"white"),this.ctx.stroke()},drawRoutes:function(){for(var t in this.routes)this.drawRoute(this.routes[t])},randomColor:function(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"}}},ht={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"main"},[e("el-row",{staticClass:"content"},[e("el-col",{staticClass:"canvasMap",attrs:{span:24}},[e("canvas",{attrs:{id:"map",width:"1200px",height:"800px"}},[this._v("\n          当前浏览器不支持Canvas，请升级浏览器或更换浏览器访问。\n        ")])])],1),this._v(" "),e("el-row",[e("el-col",{attrs:{span:4,offset:18}},[e("el-button",{staticClass:"nextStepBtn",attrs:{type:"success"}},[this._v("完成演示")])],1)],1)],1)},staticRenderFns:[]};var ft={data:function(){return{nowPage:0}},methods:{toPage:function(t){this.nowPage=t},addCarToHome:function(){this.$emit("addCar")}},components:{SelectCenter:lt,SelectRoutePoint:o("VU/8")(ut,dt,!1,function(t){o("zM0w")},"data-v-1892ee6a",null).exports,ShowRoute:o("VU/8")(pt,ht,!1,function(t){o("TgCg")},"data-v-333d5661",null).exports,HeaderHeader:y},mounted:function(){this.$emit("loaded")}},mt={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("header-header"),t._v(" "),o("div",{staticClass:"main"},[o("el-steps",{staticStyle:{"margin-top":"50px"},attrs:{active:t.nowPage,"finish-status":"success",simple:""}},[o("el-step",{attrs:{title:"选择中心点"}}),t._v(" "),o("el-step",{attrs:{title:"选择路径点"}}),t._v(" "),o("el-step",{attrs:{title:"路径展示"}})],1),t._v(" "),0==t.nowPage?o("select-center",{on:{toRoutePoint:function(e){t.toPage(1)}}}):1==t.nowPage?o("select-route-point",{on:{toCenterPoint:function(e){t.toPage(0)},toSelectVehicle:function(e){t.toPage(2)}}}):o("show-route")],1)],1)},staticRenderFns:[]};var gt=o("VU/8")(ft,mt,!1,function(t){o("DT7J")},"data-v-44016365",null).exports;n.default.use(s.a);var vt=new s.a({routes:[{path:"/Login",name:"Login",component:h,meta:{login_require:!1}},{path:"/Rejest",name:"Rejest",component:g,meta:{login_require:!1}},{path:"/TEST",name:"Rejest",component:U,meta:{login_require:!0}},{path:"/",name:"Index",component:S,meta:{login_require:!0},children:[{path:"/",name:"Indexc",component:P,meta:{login_require:!0}}]},{path:"/DataPerpare",name:"DataPerpare",component:E,meta:{login_require:!0},children:[{path:"/",name:"",component:V,meta:{login_require:!0}}]},{path:"/VehiclePerpare",name:"VehiclePerpare",component:et,meta:{login_require:!0},children:[{path:"/",name:"",component:V,meta:{login_require:!0}}]},{path:"/Path",name:"Path",component:at,meta:{login_require:!0}},{path:"/FlashPage",name:"FlashPage",component:Q,meta:{login_require:!0}},{path:"/SinglePoint",name:"SinglePoint",component:W,meta:{login_require:!0}},{path:"/APP",name:"App",component:u,meta:{login_require:!0}},{path:"/HelloWorld",name:"HelloWorld",component:r,meta:{login_require:!0}},{path:"/canvas",name:"Canvas",component:gt,meta:{login_require:!0}}]});vt.beforeEach(function(t,e,o){t.meta.login_require&&null==sessionStorage.getItem("userId")?o("/Login"):o()});var _t=vt,yt=o("zL8q"),bt=o.n(yt),wt=(o("tvR6"),o("mtWM")),xt=o.n(wt),Ct=o("NYxO");n.default.use(Ct.a);n.default.use(bt.a),xt.a.defaults.withCredentials=!0,n.default.config.productionTip=!1,n.default.prototype.$axios=xt.a,n.default.prototype.$url="http://148.70.8.11:8082/RoutePlanSystem",n.default.prototype.$qs=ct.a,n.default.use(Ct.a),n.default.use(s.a);var $t=new Ct.a.Store({state:{userId:"",deleteArray:[],userName:null,centerPoints:[],routePoints:[],qid:0},mutations:{loginState:function(t,e){sessionStorage.setItem("userId",e.userId),sessionStorage.setItem("userName",e.userName),t.userId=e.userId,t.userName=e.userName},logoutState:function(t){sessionStorage.removeItem("userId"),sessionStorage.removeItem("userName"),t.userId=null,t.userName=null},deleteArrayAdd:function(t,e){t.deleteArray.push(e)},deleteArrayDelete:function(t,e){var o=t.deleteArray.indexOf(e);t.deleteArray.splice(o,1)},deleteArrayClear:function(t){t.deleteArray=[]},setCenterPoints:function(t,e){t.centerPoints=e},setRoutePoints:function(t,e){t.routePoints=e},setQid:function(t,e){t.qid=e}},getters:{getUserId:function(t){return null==t.userId&&(t.userId=sessionStorage.getItem("userId")),t.userId},getUserName:function(t){return null==t.userName&&(t.userName=sessionStorage.getItem("userName")),t.userName},getDeleteArray:function(t){return t.deleteArray},getCenterPoints:function(t){return t.centerPoints},getRoutePoints:function(t){return t.routePoints},getQid:function(t){return t.qid}}});new n.default({el:"#app",router:_t,store:$t,components:{App:i},template:"<App/>"})},NbCZ:function(t,e){},OTV4:function(t,e){var o=window.BMapLib=o||{};!function(){function t(t,e){this._point=t,this._html=e}var e,n=n||{version:"1.5.0"};n.guid="$BAIDU$",window[n.guid]=window[n.guid]||{},n.dom=n.dom||{},n.dom.g=function(t){return"string"==typeof t||t instanceof String?document.getElementById(t):t&&t.nodeName&&(1==t.nodeType||9==t.nodeType)?t:null},n.g=n.G=n.dom.g,n.lang=n.lang||{},n.lang.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},n.isString=n.lang.isString,n.dom._g=function(t){return n.lang.isString(t)?document.getElementById(t):t},n._g=n.dom._g,n.dom.getDocument=function(t){return 9==(t=n.dom.g(t)).nodeType?t:t.ownerDocument||t.document},n.browser=n.browser||{},n.browser.ie=n.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,n.dom.getComputedStyle=function(t,e){t=n.dom._g(t);var o=n.dom.getDocument(t);return o.defaultView&&o.defaultView.getComputedStyle&&(o=o.defaultView.getComputedStyle(t,null))?o[e]||o.getPropertyValue(e):""},n.dom._styleFixer=n.dom._styleFixer||{},n.dom._styleFilter=n.dom._styleFilter||[],n.dom._styleFilter.filter=function(t,e,o){for(var a,i=0,s=n.dom._styleFilter;a=s[i];i++)(a=a[o])&&(e=a(t,e));return e},n.string=n.string||{},n.string.toCamelCase=function(t){return t.indexOf("-")<0&&t.indexOf("_")<0?t:t.replace(/[-_][^-_]/g,function(t){return t.charAt(1).toUpperCase()})},n.dom.getStyle=function(t,e){var o=n.dom;t=o.g(t),e=n.string.toCamelCase(e);var a=t.style[e]||(t.currentStyle?t.currentStyle[e]:"")||o.getComputedStyle(t,e);if(!a){var i=o._styleFixer[e];i&&(a=i.get?i.get(t):n.dom.getStyle(t,i))}return(i=o._styleFilter)&&(a=i.filter(e,a,"get")),a},n.getStyle=n.dom.getStyle,n.dom._NAME_ATTRS=(e={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"},n.browser.ie<8?(e.for="htmlFor",e.class="className"):(e.htmlFor="for",e.className="class"),e),n.dom.setAttr=function(t,e,o){return t=n.dom.g(t),"style"==e?t.style.cssText=o:(e=n.dom._NAME_ATTRS[e]||e,t.setAttribute(e,o)),t},n.setAttr=n.dom.setAttr,n.dom.setAttrs=function(t,e){for(var o in t=n.dom.g(t),e)n.dom.setAttr(t,o,e[o]);return t},n.setAttrs=n.dom.setAttrs,n.dom.create=function(t,e){var o=document.createElement(t);return n.dom.setAttrs(o,e||{})},n.object=n.object||{},n.extend=n.object.extend=function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t};var a=o.LuShu=function(t,e,o){!e||e.length<1||(this._map=t,this._path=e,this.i=0,this._setTimeoutQuene=[],this._projection=this._map.getMapType().getProjection(),this._opts={icon:null,speed:4e3,defaultContent:""},this._setOptions(o),!this._opts.icon instanceof BMap.Icon&&(this._opts.icon=defaultIcon))};a.prototype._setOptions=function(t){if(t)for(var e in t)t.hasOwnProperty(e)&&(this._opts[e]=t[e])},a.prototype.start=function(){var t=this,e=t._path.length;if(t.i&&t.i<e-1){if(!t._fromPause)return;t._fromStop||t._moveNext(++t.i)}else t._addMarker(),t._timeoutFlag=setTimeout(function(){t._addInfoWin(),t._moveNext(t.i)},400);this._fromStop=this._fromPause=!1},a.prototype.stop=function(){this.i=0,this._fromStop=!0,clearInterval(this._intervalFlag),this._clearTimeout();for(var t=0,e=this._opts.landmarkPois,o=e.length;t<o;t++)e[t].bShow=!1},a.prototype.pause=function(){clearInterval(this._intervalFlag),this._fromPause=!0,this._clearTimeout()},a.prototype.hideInfoWindow=function(){this._overlay._div.style.visibility="hidden"},a.prototype.showInfoWindow=function(){this._overlay._div.style.visibility="visible"},n.object.extend(a.prototype,{_addMarker:function(){this._marker&&(this.stop(),this._map.removeOverlay(this._marker),clearTimeout(this._timeoutFlag)),this._overlay&&this._map.removeOverlay(this._overlay);var t=new BMap.Marker(this._path[0]);this._opts.icon&&t.setIcon(this._opts.icon),this._map.addOverlay(t),t.setAnimation(BMAP_ANIMATION_DROP),this._marker=t},_addInfoWin:function(){var e=new t(this._marker.getPosition(),this._opts.defaultContent);e.setRelatedClass(this),this._overlay=e,this._map.addOverlay(e)},_getMercator:function(t){return this._map.getMapType().getProjection().lngLatToPoint(t)},_getDistance:function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},_move:function(t,e,o){var n=this,a=0,i=this._opts.speed/100;t=this._projection.lngLatToPoint(t),e=this._projection.lngLatToPoint(e);var s=Math.round(n._getDistance(t,e)/i);s<1?n._moveNext(++n.i):n._intervalFlag=setInterval(function(){if(a>=s)clearInterval(n._intervalFlag),n.i>n._path.length||n._moveNext(++n.i);else{a++;var i=o(t.x,e.x,a,s),l=o(t.y,e.y,a,s);i=n._projection.pointToLngLat(new BMap.Pixel(i,l)),n._marker.setPosition(i),n._setInfoWin(i)}},10)},_moveNext:function(t){t<this._path.length-1&&this._move(this._path[t],this._path[t+1],this._tween.linear)},_setInfoWin:function(t){this._overlay.setPosition(t,this._marker.getIcon().size);var e=this._troughPointIndex(t);-1!=e?(clearInterval(this._intervalFlag),this._overlay.setHtml(this._opts.landmarkPois[e].html),this._overlay.setPosition(t,this._marker.getIcon().size),this._pauseForView(e)):this._overlay.setHtml(this._opts.defaultContent)},_pauseForView:function(t){var e=this;t=setTimeout(function(){e._moveNext(++e.i)},1e3*e._opts.landmarkPois[t].pauseTime),e._setTimeoutQuene.push(t)},_clearTimeout:function(){for(var t in this._setTimeoutQuene)clearTimeout(this._setTimeoutQuene[t]);this._setTimeoutQuene.length=0},_tween:{linear:function(t,e,o,n){return(e-t)*o/n+t}},_troughPointIndex:function(t){for(var e=this._opts.landmarkPois,o=0,n=e.length;o<n;o++)if(!e[o].bShow&&this._map.getDistance(new BMap.Point(e[o].lng,e[o].lat),t)<10)return e[o].bShow=!0,o;return-1}}),t.prototype=new BMap.Overlay,t.prototype.initialize=function(t){var e=this._div=n.dom.create("div",{style:"border:solid 1px #ccc;width:auto;min-width:50px;text-align:center;position:absolute;background:#fff;color:#000;font-size:12px;border-radius: 10px;padding:5px;white-space: nowrap;"});return e.innerHTML=this._html,t.getPanes().floatPane.appendChild(e),this._map=t,e},t.prototype.draw=function(){this.setPosition(this.lushuMain._marker.getPosition(),this.lushuMain._marker.getIcon().size)},n.object.extend(t.prototype,{setPosition:function(t,e){var o=this._map.pointToOverlayPixel(t),a=n.dom.getStyle(this._div,"width"),i=n.dom.getStyle(this._div,"height");overlayW=parseInt(this._div.clientWidth||a,10),overlayH=parseInt(this._div.clientHeight||i,10),this._div.style.left=o.x-overlayW/2+"px",this._div.style.bottom=-(o.y-e.height)+"px"},setHtml:function(t){this._div.innerHTML=t},setRelatedClass:function(t){this.lushuMain=t}})}()},RqNW:function(t,e){},SIY2:function(t,e){},TgCg:function(t,e){},UHR4:function(t,e){},VkQN:function(t,e){},YkMK:function(t,e){},hhh4:function(t,e){},iK33:function(t,e){},kTa8:function(t,e){},mR14:function(t,e){},oTrB:function(t,e){},tvR6:function(t,e){},zM0w:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.addb80b842e55747be7a.js.map